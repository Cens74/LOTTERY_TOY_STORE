# Проект "Лотерея в магазине игрушек"

## I. Концепция

Данная программа предназначена для проведения розыгрыша в магазине игрушек. 
Предполагаются следующие входные данные: 
- Файл с номенклатурой магазина игрушек
- Число участников розыгрыша (N)
- Общее число разыгрываемых призов (M) (не может быть меньше числа участников)

Пользователь вводит с клавиатуры путь к файлу с номенклатурой магазина и название этого файла (.txt), 
а также число участвующих в розыгрыше детей (N) и общее количество разыгрываемых призов (M). 

Если все введенные пользователем данные валидны, по заданным параметрам создается лотерея и производится розыгрыш. 
Результат розыгрыша - список из N товаров, выигравших в лотерее.

## II. Детали реализации

### 1. Игрушка (класс Toy)

Игрушка - это структура данных, описываемая следующими полями: 

* __*ID игрушки*__ - уникальное для кадой игрушки целое положительное число
* __*Тип игрушки*__ - строка, состоящая из символов __[а-яА-Я., <>\-_()]__
* __*Название игрушки*__ - строка из символов __[а-яА-Я0-9\-",. _<>()]__

### 2. Магазин игрушек (Класс ToyStore)

Магазин игрушек характеризуется __*номенклатурой*__.
Номенклатура - это список __*номенклатурных единиц*__ (или __*товаров*__). 
_**Номенклатурная единица (товар)**_ - это структура данных, описываемая следующими полями: 
- __*ID номенклатурной единицы*__ - положительное целое число, уникальное в рамках магазина. 
- __*Номенклатурная единица (товар)*__ -  игрушка
- __*Количество*__ - текущий остаток в магазине
- __*Цена*__ - цена

Файл с номенклатурой - это .txt-файл, каждая строка которого описывает одну номенклатурную единицу 
и содержит следующие поля, разделенные точками с запятой:
- __*ID игрушки*__
- __*Тип игрушки*__
- __*Название игрушки*__
- __*Остаток в магазине*__
- __*Цена*__

**Пример:**

56;Игрушка_мягкая;"Пудель";11;1340.50

ID номенклатурной единицы присваивается в процессе чтения файла и формирования списка номенклатурных единиц. 
В момент создания внутренней структуры (список), хранящей список номенклатурных единиц, 
ID ном. единиц - это ряд из идущих подряд целых положительных чисел, начинающихся с 1. 

Товарные единицы хранятся в списке:

    `List<NomenclatureItem> toysAssortment`

Чтобы была возможность добавления товаров в номенклатуру и вывода товаров 
из номенклатуры, в классе ToyStore предусмотрена структура данных 

    `PriorityQueue<Integer> freedIDQueue`

, хранящая приоритезированную очередь высвободившихся ID, которая позволяет присваивать 
новым товарным единицам ID выведенных из ассортимента товаров.

В начале работы программа выводит в консоль всю номенклатуру магазина, 
чтобы пользователь, ознакомившись с ней, мог выбрать игрушки для лотереи и 
сформировать список лотов вида: 

    <ID номенклатурной единицы> <Вес>

, в котором каждая строка содержит через пробел ID номенклатурной единицы и ее вес
для участия в лотерее. 

### 3. Лотерея (Класс Lottery)

Класс __*Lottery*__ описывается следующими полями:

* __*toyStore*__ - магазин, в котором производится розыгрыш
* __*qtyOfParticipants*__ - количество участников лотереи
* __*qtyOfPrizes*__ - количество разыгрываемых призов
* __*lots*__ - список лотов
* __*Map<Integer, Integer> lotsQuantities*__ - карта количества лотов, которые потребуются для 
розыгрыша лотереи с заданными параметрами (чтобы игрушек хватило всем участникам, 
и были соблюдены веса лотов)
* __*PriorityQueue<Prize> prizes*__ - очередь призов на выдачу. Формируется в 
соответствии с приоритетами, присваемыми призам случайным образом, чтобы смоделировать 
реальную лотерейную ситуацию. 

### 4. Лот (Класс Lot)

__*ЛОТ*__ - это пара __<ID номенклатурной единицы>__ + __<Вес>__, где _**Вес**_ - это 
целое положительное число, характеризующее частоту выпадения данного лота в 
лотерее. 
Таким образом, выбираются игрушки, которые будут принимать участие в 
розыгрыше, и для каждой из них задается вес - относительная частота выпадения. 
По этим данным определяется, сколько каких игрушек нужно взять для розыгрыша, 
чтобы соблюсти условия, задаваемые весами: суммируются все веса и затем 
для каждой игрушки определяется ее количество пропорционально доле ее веса 
в сумме весов и исходя из заданного пользователем количества призов, которое 
будет принимать участие в лотерее. 

### 5. Приз (Класс Prize)

__*ПРИЗ*__ - это объект с тремя полями: 

- __*ID приза*__ - целое положительное число, обеспечивающее его уникальность
- __*Toy*__ - какая игрушка является данным призом
- __*Приоритет*__ - случайным образом назначаемый приоритет (целое число от 0 до 
количества призов, определяющее последовательность выпадения лотов в лотерее), 
обеспечивающий случайный порядок выбора. 

### 6. Тестовые данные

Для тестового прогона программы в проекте созданы файлы: 

* __toyStore.txt__ - файл с номенклатурой магазина игрушек
* __lots.txt__ - файл с лотами, которые будут принимать участие в розыгрыше
  (проверяющий может создать свой файл для проверки, по данному образцу)

### 7. Результаты лотереи

Результат розыгрыша - первые N призов из приоритезированной очереди призов, 
сформированной лотереей. По числу участников. 
В зависимости от того, какую опцию выберет пользователь, результаты лотереи 
могут быть записаны в стандартный файл __lotteryResult.txt__, который будет создан 
в текущем каталоге, либо в файл, указанный пользователем, либо выведены в консоль. 








